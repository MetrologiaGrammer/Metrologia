<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8" />
    <title>EQUIPOS DE MEDICION</title>
    <script src="lib/jquery.min.js"></script>
    <link rel="stylesheet" href="lib/bootstrap.min.css">
    <link rel="stylesheet" href="lib/bootstrap-theme.min.css">
    <script src="lib/bootstrap.min.js"></script>
    <link rel="stylesheet" type="text/css" href="lib/jquery.dataTables.min.css" />
    <script type="text/javascript" src="lib/datatables.min.js"></script>
    <link rel="stylesheet" type="text/css" href="lib/all.min.css" />
    <script src="lib/datepicker/moment.min.js"></script>
    <script type="text/javascript" src="lib/datepicker/js/bootstrap-datepicker.min.js"></script>
    <link rel="stylesheet" type="text/css" href="lib/datepicker/css/bootstrap-datepicker.min.css" />
    <script type="text/javascript" src="lib/datepicker/js/daterangepicker.min.js"></script>
    <link rel="stylesheet" type="text/css" href="lib/datepicker/css/daterangepicker.css" />
    <link rel="shortcut icon" href="lib/assets/img/iconoarriba.png" />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
</head>

<body>

<br /><br />
<div class="container">
    <div class="row">
    </div>

    <div class="row">
        <h1 align="center">EQUIPOS</h1>
    </div>
    <a href="https://arketipo.mx/Metrologia/pantallaInicio/index.html" class="btn btn-primary">PAGINA DE INICIO</a>
    <span class="input-group-addon"></span>

    <div class="row" id="trigger">

        <div id="secret" class="col-xs-12 col-md-2">
            <input class="form-control input-sm" name="min" id="min" type="hidden" placeholder="Fecha Inicial...">
        </div>

        <div id="secret2" class="col-xs-12 col-md-2">
            <input class="form-control input-sm" name="max" id="max" type="hidden" placeholder="Fecha Final...">
        </div>

        <div style="display: none;border: 1px solid #ccc!important; border-radius: 16px; padding:16px; margin-bottom: 3%">

            <center>
                <span class="input-group-addon"></span>

                <label for="nomina">Folio : </label>
                <input id="nomina"
                       style="border: 1px solid #ccc!important; border-radius: 16px; width:180px; padding:16px; height: 30px"
                       type="text">

                <label for="from">From</label>
                <input
                        style=" border: 1px solid #ccc!important; border-radius: 16px; width:130px; padding:16px; height: 30px"
                        type="text" id="from" name="from" data-date-format="yyyy-mm-dd">
                <label for="to">to</label>
                <input
                        style=" border: 1px solid #ccc!important; border-radius: 16px; width:130px; padding:16px; height: 30px"
                        type="text" id="to" class="date" data-date-format="yyyy-mm-dd">


                <select style="margin-left:1%; border: 1px solid #ccc!important; border-radius: 16px; padding:16px;"
                        id="Area" class="form-select form-select-lg ml-3" aria-label="Default select example">
                    <option value="" selected>Elige el Area</option>
                    <option value="APU">APU</option>
                    <option value="Alamacen">Alamac&eacute;n</option>
                    <option value="Calidad">Calidad</option>
                    <option value="Contraloria">Contraloria</option>
                    <option value="GPS">GPS</option>
                    <option value="HSB">HSB</option>
                    <option value="ILE">ILE</option>
                    <option value="Ingenieria">Ingenier&iacute;a</option>
                    <option value="Manager">Manager</option>
                    <option value="Logistica">Log&iacute;stica</option>
                    <option value="Matenimiento">Matenimiento</option>
                    <option value="Metrologia">Metrolog&iacute;a</option>
                    <option value="Produccion">Producci&oacute;n</option>
                    <option value="RH">RH</option>
                    <option value="ShiftLeader">Shift Leader</option>
                    <option value="Supervisor">Supervisor</option>
                    <option value="IT">IT</option>
                    <option value="Practicante">Practicante</option>
                </select>

   <!--             <select style="margin-left:1%; border: 1px solid #ccc!important; border-radius: 16px; padding:16px;"
                        id="Hallazgo" class="form-select form-select-lg mb-3" aria-label=".form-select-lg example">
                    <option value="" selected>Tipo de hallazgo :</option>
                    <option value="Mantenimiento">Mantenimiento</option>
                    <option value="Calidad">Calidad</option>
                    <option value="Seguridad">Seguridad</option>
                    <option value="Documentacion">Documentación</option>
                    <option value="5s">5s</option>
                    <option value="and Hallazgo=2.-Felicitacion">Felicitaci&oacute;n</option>
                </select> -->

                <button style="margin-left: 1%" type="button" class="btn btn-default" onClick="llenarTablaTurno();">
                    <span class="glyphicon glyphicon-search"></span>
                </button>

                <a></a>
            </center>
        </div>
    </div>


    <span class="input-group-addon"></span>

    <div class="row">
        <div class="starter-template">
        </div>
    </div>

    <div class="row">
        <section>
            <div class="col-md-12">
                <div class="table-responsive-sm">
                    <table id="example" tableexport-key="tabla" class="table display">
                        <thead>
                        <tr>
                            <th>ID REFERENCIA</th>
                            <th>TIPO</th>
                            <th>PROCESO</th>
                            <th>ÁREA</th>
                            <th>FECHA DE CALIBRACIÓN</th>
                            <th>PROX. FECHA DE CALIBRACIÓN</th>
                            <th>STATUS</th>
                            <th>MÁS INFORMACIÓN</th>
                        </tr>
                        </thead>
                        <tfoot>
                        <tr>
                            <th>Filter..</th>
                            <th>Filter..</th>
                            <th>Filter..</th>
                            <th>Filter..</th>
                            <th>Filter..</th>
                            <th>Filter..</th>
                            <th>Filter..</th>
                            <th>Filter..</th>

                        </tr>
                        </tfoot>
                    </table>
                </div>
                <hr class="d-sm-none">
            </div>
            <iframe id="txtArea1" style="display:none"></iframe>

            <a class="" href="https://arketipo.mx/Metrologia/pantallaInicio/index.html">
                <svg xmlns="http://www.w3.org/2000/svg" width="36" height="36" fill="currentColor"
                     class="bi bi-arrow-left-circle-fill" viewBox="0 0 16 16">
                    <path
                            d="M8 0a8 8 0 1 0 0 16A8 8 0 0 0 8 0zm3.5 7.5a.5.5 0 0 1 0 1H5.707l2.147 2.146a.5.5 0 0 1-.708.708l-3-3a.5.5 0 0 1 0-.708l3-3a.5.5 0 1 1 .708.708L5.707 7.5H11.5z" />
                </svg>
            </a>


        </section>
    </div>
</div>

<!-- Button trigger modal -->
<button type="button" id="model" class="btn btn-primary btn-lg" style="display: none" data-toggle="modal"
        data-target="#myModal">
    Launch demo modal
</button>

<!-- Modal -->
<div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span
                        aria-hidden="true">&times;</span></button>
                <h4 class="modal-title" style="color: red" id="myModalLabel"><center>Error de campos vacios.</center></h4>
            </div>
            <div class="modal-body">
                <center><img src="lib/assets/img/rojo.png" width="30%" alt="..." class="img-rounded">
                    <br><br>
                    <h4>Se necesita ingresar el campo de fecha</h4>
                </center>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>

<script src="https://cdn.datatables.net/buttons/2.2.3/js/buttons.print.min.js"></script>
<script src="https://cdn.datatables.net/buttons/2.2.3/js/buttons.colVis.min.js"></script>
<script src="https://cdn.datatables.net/buttons/2.2.3/js/dataTables.buttons.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.1.53/pdfmake.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.1.53/vfs_fonts.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.1.3/jszip.min.js"></script>
<script src="https://cdn.datatables.net/buttons/2.2.3/js/buttons.html5.min.js"></script>

<script>

    $(document).ready(function () {

        $('#example tfoot th').each(function () {
            var title = $(this).text();
            $(this).html('<input type="text" placeholder="Filtrar..." class="form-control input-sm" size="3px" />');
        });

        var tabla = $('#example').DataTable({
            "responsive": true,
            "ajax": {
                "url": "https://arketipo.mx/Metrologia/dao/daoTabla.php",
                "dataSrc": "data"
            },
            "columns": [
                { "data": "IdEquipo" },
                { "data": "Tipo" },
                { "data": "AreaProceso" },
                { "data": "AreaLinea" },
                { "data": "AreaOperacion" },
                { "data": "FechaInspeccion" },
                { "data": "FechaVencimiento" },
                { "data": "Caracteristica" },
                { "data": "boton" }
            ],
            "initComplete": function () {
                this.api().columns().every(function () {
                    var that = this;
                    $('input', this.footer()).on('keyup change', function () {
                        if (that.search() !== this.value) {
                            that
                                .search(this.value)
                                .draw();
                        }
                    });
                });
            },
            dom: 'lBfrtip',
            buttons: [
                {
                    extend: 'copyHtml5',
                    text: 'Copiar',
                    exportOptions: {
                        columns: [':visible']
                    },
                    titleAttr: 'Copiar Texto',
                    className: 'btn btn-secondary'
                },
                {
                    extend: 'excelHtml5',
                    exportOptions: {
                        columns: [':visible']
                    },
                    titleAttr: 'Exportar a Excel',
                    className: 'btn btn-success'
                },
                {
                    extend: 'pdfHtml5',
                    exportOptions: {
                        columns: [':visible']
                    },
                    titleAttr: 'Exportar a PDF',
                    className: 'btn btn-danger',
                    orientation: 'landscape',
                    pageSize: 'LEGAL'
                }
                /*
                {
                    text: 'Seleccione las columnas',
                    extend: 'colvis',
                    className: 'btn btn-info'
                }*/

            ],
            "paging": true,
            "lengthChange": true,
            "searching": true,
            "ordering": true,
            "info": true,
            "autoWidth": false,
            "responsive": true,
            "loadingRecords": "Cargando...",
            "deferRender": true,
            "search": {
                "regex": true,
                "caseInsensitive": true,
            },
        });

        $.fn.dataTable.ext.search.push(
            function (settings, data, dataIndex) {
                var min = $('#min').datepicker('getDate');
                var max = $('#max').datepicker('getDate');
                var startDate = new Date(data[4]);
                if (min == null && max == null) return true;
                if (min == null && startDate <= max) return true;
                if (max == null && startDate >= min) return true;
                if (startDate <= max && startDate >= min) return true;
                return false;
            }
        );

        $('#min').datepicker({ onSelect: function () { table.draw(); }, changeMonth: true, changeYear: true });
        $('#max').datepicker({ onSelect: function () { table.draw(); }, changeMonth: true, changeYear: true });
        var table = $('#example').DataTable();

        $('#min, #max').change(function () {
            table.draw();
        });
        //
    });

</script>


<script>



    function llenarTabla() {

        var numero = $("#numNomina").val();
        if (numero.length > 4) {
            $('#example').DataTable({
                dom: 'lrtip',
                destroy: true,
                "responsive": true,
                "ajax": {
                    "url": "http://" + window.location.host + "/RH/rest/reporte/incidencias/" + numero,
                    "dataSrc": "data"
                },
                "columns": [
                    { "data": "Id" },
                    { "data": "Nomina" },
                    { "data": "Nombre" },
                    { "data": "Area" },
                    { "data": "JefeInmediato" },
                    { "data": "Hallazgo" }
                ],
                "initComplete": function () {
                    this.api().columns().every(function () {
                        var that = this;
                        $('input', this.footer()).on('keyup change', function () {
                            if (that.search() !== this.value) {
                                that
                                    .search(this.value)
                                    .draw();
                            }
                        });
                    });
                },
                "deferRender": true,
                "autoWidth": false,
                "search": {
                    "regex": true,
                    "caseInsensitive": true,
                },
            });

            $("#numNomina").val('');
        } else {
            alert("Falta campo requerido u.u");
        }
    }
    $("#trigger").hover(function () {
    }, function (e) {
    });

</script>

</body>

</html>